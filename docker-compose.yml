version: '2'
services:
  db:
    container_name: nekobot_mongodb

    image: mongo:latest

    volumes:
      - data:/data/db

  nekobot:
    container_name: nekobot_discord

    build: ./bot

    links:
      - db:mongodb

    env_file:
      - ./nekobot.rc

  nginx:
    container_name: nekobot_nginx

    build: ./nginx

    depends_on:
      - web

    links:
      - web

    ports:
      - "80:80"
      - "443:443"

  web:
    container_name: nekobot_web

    build: ./web

volumes:
  data:

